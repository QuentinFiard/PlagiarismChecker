

SIAM J. COMPUT.

Vol. 11, No. 4, November 1982

1982 Society for Industrial and Applied Mathematics

0097-5397/82/1104-0011 $01.00/0

THE CATEGORY-THEORETIC SOLUTION OFRECURSIVE DOMAIN EQUATIONS*

M. B. SMYTHt AND G. D. PLOTKIN"
Abstract. Recursive specifications of domains plays a crucial role in denotational semantics as developed by Scott and Strachey and their followers. The purpose of the present paper is to set up a categorical
framework in which the known techniques for solving these equations find a natural place. The idea is to
follow the well-known analogy between partial orders and categories, generalizing from least fixed-points

of continuous functions over cpos to initial ones of continuous functors over o-categories. To apply these
general ideas we introduce Wand's O-categories where the morphism-sets have a partial order structureand

which include almost all the categories occurring in semantics. The idea is to find solutions in a derived
category of embeddings and we give order-theoretic conditions which are easy to verify and which imply

the needed categorical ones. The main tool is a very general form of the limit-colimit coincidence remarked
by Scott. In the concluding section we outline how compatibility considerations are to be included in the
framework. A future paper will show how Scott's universal domain method can be included too.

Key words. Domains, semantics, data-types, category, partial-order, fixed-point, computability

1. Introduction. Recursive specifications of domains play a crucial role in denotational semantics as developed by Scott and Strachey and their followers (Gordon [13],
Milne and Strachey [26], Stoy [39], Tennent [40], [41]). For example, the equation

(1) D -At+(D-D)
is just what is needed for the semantics of an untyped A-calculus for computing over

a domain, At, of atoms. Again, the simultaneous equations

(2) T-AtxF,

(3) FI+(TxF)
specify a domain, T, of all finitarily branching trees and another, F, of forests of such

trees. And recursively specified data types are also very useful [10], [19], [20].

The first tools for solving such equations were provided by Scott using his inverse
limit constructions [33]. Later he showed how the inverse limits could be entirely

avoided by using a universal domain and the ordinary least fixed point construction[34]. A

systematic exposition of the inverse limit method was given by Reynolds [301,and the

categorical aspects (already mentioned by Scott) were emphasized by Wand[43]. All of these

treatments stuck to one category, such as, for example, CL, thecategory of countably based

continuous lattices and continuous functions, although
the details did not change much in other categories. Then Wand [44], gave an abstract

treatment based on O-categories where the morphism sets are provided with a suitable
order-theoretic structure. The relation between the category-theoretic treatment and
the universal domain method has, until now, remained rather obscure.

The purpose of the present paper is to set up a categorical framework in which
all known techniques for solving domain equations find a natural place. The idea as
set out in 2 is to follow the well-known analogy between partial orders and categories,

and generalize from least fixed points to initial fixed points. These are constructed

* Received by the editors January 2, 1979, and in revised form February 17, 1982. This work was
partially supported by a grant from the Science and Engineering Research Council.r Department

of Computer Science, University of Edinburgh, Edinburgh, Scotland EH9 3JZ.

761

762 M.B. SMYTH AND G. D. PLOTKIN

using the "basic lemma" which plays an organiz.ational role" Most of the solutionmethods considered appear

as ways of ensuring that the hypotheses of the lemma are
fulfilled. Just as continuous functions over complete partial orders always have least

fixed points, so continuous functors over o)- categories (as defined below) always have
initial fixed points, which can be constructed by using the basic lemma; this seems to
formalize some hints of Lawvere mentioned by Scott in [33]. The same idea appears

in [1], [2].All

this is very general, and we introduce O-categories in 3 in order to apply
the basic lemma to the construction of the domains needed in denotational semantics.Here

we are clearly greatly indebted to Wand [44], [45] who introduced O-categories,
and indeed our work arose partly as an attempt to simplify and clarify his treatment.
The idea is to apply the basic lemma not to a given O-category, K, but rather to a

derived category, KE, of embeddings (equivalently, projections). We then look for
easily verified conditions on K (whether categorical or order-theoretic) which implythe needed conditions

on KE.Our
main tool is Theorem 2, which establishes a very general form of the
limit-colimit coincidence remarked by Scott [33] and also gives an order-theoretic

characterization of the relevant categorical limits. This improves Wand's work by
removing the need for his troublesome "Condition A" (appearing in [44] rather than[45]

which incorporates some of the ideas of the present paper); more positively we
also introduce a useful notion of duality for O-categories.

With the aid of Theorem 2 (and the easy Theorem 1), one sees that simple
conditions on an O-category, K, (mainly that it has all P-limits) ensure that KE is
an o-category. Again with the aid of (Lemma 4 and) Theorem 3, one sees how to
take any mixed contravariant-covariant functor over K (like the function-space one)
which satisfies an order-continuity property (usually evident), and turn it into a

covariant-continuous one over KE.

Section 4 presents several examples of useful categories which may be handled
by the methods of 2 and 3.The method of

universal domains, in relation to the ideas presented here, is
treated in the sequel to this paper. An indication of our approach may be found in
Plotkin and Smyth [28] (which may also be of help in getting a general overview of

our results).There

is, however, one aspect of Scott's presentation of the universal domainapproach [34]

which must receive some mention here: the question of computability.
The results presented in this paper would lose much of their point if we were forced

to invoke a universal domain to handle computability. In the concluding 5, we

indicate briefly how this topic can in fact be handled at the level of generality of thispaper; for

a more detailed treatment we refer to Smyth [38].We
assume the reader possesses a basic knowledge of category theory; any gaps
can be filled by consulting Arbib and Manes [4], Herrlich and Strecker [16], orMacLane [21 ].

2. Initial fixed points. In the categorical approach to recursive domain specifications we try to regard all equations such as (1) or (2) and (3) above as being of the form

(4) X F(X),
where X ranges over the objects of a category K, say, and F:K K is an endofunctorof that category. For example,

in the case of (1) we could take X to range over the
objects of K, At to be a fixed object of K, and + and to be covariant sum and

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 763
function-space functors over K; then F" K K is defined by"

At+ (X X).(5) F(X)def
Let us spell the meaning of (5) out in detail. Recall that if Fi:K Ki (i- 1, r/) are

functors then their tupling F (El, Fn): K- K1 " x K, is defined by putting
for each object, X, of K:

F(X) (FI(X), Fn (X))

and for each morphism f: X Y of K:

F(f (F,(f ), F, (f )).
Then the functor F defined by (5) is just

F + (KAt, -- o(idm idI))
where KAt :K- K is the constantly-At functor and idI :K-. K is the identity functor.

Simultaneous equations are handled using product categories. For example, (2)
and (3) can be regarded as having the form:

(6) X Fo(X, Y),
(7) Y F (X, Y),
where X, Y range over a category K (such as CL) and F0 and F are bifunctors overK

being defined by

X o<KAt 7rl>,F def F1 +o<K,, X o<'rro, 7'/'1>>def

where At, 1 are objects of K, and the 7ri" K xK-K (i =0, 1) are the projection

functors. Then (2) and (3) are put into the form (4) by using the product categoryK x K and

taking F to be (Fo, F). Clearly this idea works for n simultaneous equationsXi =Fi(X1, ,X,) (i 1, n)whereXi rangesover Ki (i 1, n)andFi :K x... xK,

K; we just take K to be Kx " K, and F to be (Fx, ', F,).Let

us now decide what a solution to (4) might be and which particular ones we
want. In the case where K is a partial order, F is then just a monotonic function,

solutions are just fixed points of F (that is, elements A of K such that A =F(A)),

and we can look for least solutions. Further, we can define prefixed points as elementsA

such that F(A)A, and it turns out that the least prefixed point, if it exists, isalways

the least fixed point as well. In the categorical case we need to know the
isomorphism as well as the object:DEFINITION 1. Let K be

a category and F: K- K be an endofunctor. Then afixed
point of F is a pair (A, c) where A is an object of K and a'FA -A is an
isomorphism of K; a prefixed point is a pair (A, a) where A is an object of K anda:FA A

is a morphism of K.We
also call prefixed points of F, F-algebras (same as F-dynamic of Arbib andManes [4]).

The F-algebras are the objects of a category:DEFINITION

2. Let (A, a) and (A', a') be F-algebras. A morphism f: (A, a)-(A', ') (F-homomorphism)

is just a morphism f'A -A' in K such that the following
commutes:

764 M.B. SMYTH AND G. D. PLOTKIN

FA A

FA' A'
It is easily verified that this gives a category: the identity and composition are both
inherited from K. Following on the above remarks on partial orders, we look for
initial F-algebras rather than just initial fixed points of F and this is justified by the
following lemma (which also appears in Arbib [5], and in Barr [8], where it is credited

to Lambek).LEMMA 1. The

initial F-algebra, if it exists, is also the initial fixed point.Proof. Let (A, a)

be the initial F-algebra. We only have to prove that a is an
isomorphism. Now as (A, a) is an F-algebra so is (FA, Fa) and so there is anFhomomorphism f: (A, a (FA, Fa ); one also easily sees that a (FA, Fa - (A, a)
is an F-homomorphism and so a of: (A, a) (A, a) is also one and it must be idA,the

identity on A as (A, a) is initial. Then as f: (A, a)-(FA, Fa) we also havefoa=(Fa)o(Ff)=F(aof)=F(idA)=idFA,

which shows that a is an isomorphism
with two-sided inverse fiNote

that we have to do more than specify an object A such that A -F(A) when
looking for the initial fixed point. First we have to specify an isomorphism a" FA -A,and secondly

we must establish the initiality property. Both are vital in applications.
When giving the semantics of programming languages using recursively specified

domains the isomorphism is needed just to be able to make the definitions. Initiality

is closely connnected to structural induction principles and both can be used for
making proofs about elements of the specited domains. When the equations are used

to specify data-type definitions within a language following the approach in Lehmann

and Smyth [19], [20], the isomorphism carries the basic operations, and initiality is
again essential for proofs. (The paper [20] also contains more information on simultaneous equations and on equations with parameters; in many ways, it is a companion
to the present paper.)

When K is a partial order, the least fixed point can, as is well known, be constructed
as IIKFn(_L), the 1.u.b. of the increasing sequence (F"(_k)),,o where _L is the least

element of K. This works if the least element exists, the 1.u.b. exists and F preserves
the 1.u.b.that is, F(IIK F (+/-)) IlK F(F (+/-)). Our basic lemma merely generalizes

these remarks to the case of a category.

First we give some notation and terminology which are not quite standard. By
an to-chain in a category K we understand a diagram of the form A Do o Da .(that

is, a functor from to to K); for m =< n, we write f,,, :D,, D, for the morphismf,_ao.., of,,. Dually

an toP-chain in a category K is a diagram of the formA =Do ro D r (that

is, a functor from tooo to K); for m ->n we have the evidentf,,, :D,, D,. By the mediating

morphism between a limiting (colimiting)/x over adiagram A and any other
cone u over A, we must understand the unique morphism
given by universality from (to) the vertex of u to (from) the vertex of

Notation. The initial object of a category K is written as _t_i and the unique arrow
from it to an object A is written as _LA. If A Do o D1 "" is an to-chain in Kand/x: A - A

is a cone over A, then A- is the to-chain D1 ' D2 _f2... and -: A- A
is the cone (/X,+l)n,o; if, further, F:K-L is a functor, then F A is the to-chainFDo -Fr FD1 _rr,

and Ftx FA-FA is the cone

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 765
Now given a functor F" K--> K we can define the to-chain A (F" (+/-i), F" (+/-F_l_))(if
+/- i exists) and try to justify the calculation analogous to that for partial orders"

F lim A lim FA lim A- lim A.
The basic lemma gives conditions for this to work and characterizes lim_. A (with an
appropriate morphism) as the initial F-algebra.LEMMA 2 (basic lemma). Let Kbe

a category with initial obfect +/- and letF" K--> K
be a functor. Define the to-chain A to be (F" (1), F" (+/-F+/-)). Suppose that both Ix" A --> Aand Fix" FA--> FA

are colimiting cones. Then the initial F-algebra exists and is (A, a)where
a" FA --> A is the mediating morphism from Fix to ix-.Proof. Let a"FA'-->A'

be any F-algebra. We show there is a unique Fhomomorphism f: (A, a)-->(A', a'). First suppose f is such a homomorphism. Define
a cone u'A->A' by putting vo= +/-A, +/- A' and v,+l=a'oF(v,). To see v is a cone
we prove by induction on n that the following diagram commutes.

Fn(+/-.+/-)F"(+/-) Fn+l(+/-)

vn +1

oF"+l(+/-+/-)This is clear for n 0. For n + 1 we have: v,+2=a'oF(v,+loF"(+/-l.))=a'oF(v,) (by
induction assumption) v, +l Now the
uniqueness of f will follow when we show it is the mediating morphism from ix to v;here

we use induction on n to show v, f Ix,. This is clear for n 0. For n + 1 wehave'foix,+l=fOaoF(ix,) (by

the definition of a)=a'oF(f)oF(ix,) (f is
a homomorphism) a' F (f ix,) a' v, (by induction assumption)

Secondly, to show that f exists, let it be the mediating morphism from ix to v (sothat

v, fo ix, for all integers, n) where v is defined as above. We will show that f oa
and a'o Ff are both mediating arrows from Fix to v-, thus demonstrating that they
are equal and that f is an F-homomorphism as required.In

the first case, (foa)oFix, =fOixn+ (by definition of a)'--/n+X (by definition
of f). In the second case, (a'oFf)oFix,=a'oF(foix,)=a'oFv, (by definition off)

v,+ (by definition of v). This concludes the proof.In the case of

partial orders, our method of constructing least fixed-points alwaysworks if K
is an w-complete partial order and F" K--> K is o-continuous. Here anw-complete
pointed partial order (cpo) is a partial order which has 1.u.b.s of all increasingw-sequences and

which has a least element; it is termed an "w-complete partial order"or
even just a "complete partial order" elsewhere. Also a function F' K --> L of partial
orders is w-continuous if and only if it is monotonic and preserves 1.u.b.s of increasing
to-sequences, that is, if whenever (x,),,o is an increasing w-sequence such thatexists, then F(I It: x,) IIc F(x,). We make analogous definitions for categories"

DEFINITION 3. A category, K, is an o-complete pointed category (shortened below
to to-category) if and only if it has an initial element, and every co-chain has a colimit.DEFINITION

4. Let F" K--> L be a functor. It is w-continuous if and only if itpreserves
o-colimits; that is, whenever A is an to-chain and g" A- A is a colimiting

766 M.B. SMYTH AND G. D. PLOTKIN
cone, then Fix :FA FA is also a colimiting cone. (The reader is warned that this
definition is dual to the notion of continuity of functors usual in category theory(MacLane [21]);

this is done in order to maintain the analogy with partial orders.)Clearly,
when K is an to-category and F" K K is to-continuous, the conditions
of the basic lemma are satisfied. In 3 we will give the conditions for this to be the

case. In the sequel to this paper (see also Plotkin and Smyth [28]), we will show that,
in the presence of a universal object, the conditions of the basic lemma may be satisfied
without requiring that K be an to-category and that F be to-continuous. Usually, we

can completely avoid direct verification of the conditions of the basic lemma, or of
whether something is an to-category or is to-continuous. Of course sometimes, as in

the case of Set, it is already known that we have an to-category and that such functors

as + and are to-continuous (see Lehmann and Smyth [20]). One case in which there
is, so far, no alternative to direct verification is with Lehmann's category, Dora ofsmall to-categories and

to-continuous functors [18] (in this case Dora-categories might
provide a good general setting).Note that

it is only necessary to check that the basic categories are to-categories
and the basic functors are to-continuous; one easily proves that any denumerableproduct

of to-categories is an to-category, that all constant and projection functors
are to-continuous, and that composition and tupling preserve to-continuity. Thus to
solve (1) one only needs to check that + and are to-continuous; for (2) and (3) one

looks at + and .

The original work on models of the pure A-calculus (Scott [34], Wadsworth [42])
did not solve (4) as lim_. (F"(_I_), Fn(IF+/-)), but rather as lim_, (F'(D), F"('n')) for an

object D and a morphism "n"D F(D). It turns out that this solution is, essentially,
the initial fixed point of a functor F=, derived from F, over the comma category (D SK)of

"objects over D" (see MacLane [21]). The analogous idea in partial orders is that
of a least fixed point greater than some fixed element, d.

The comma category (D,K) has as objects pairs (A, d) where A is an object ofK
and d:D A; the morphisms f:(A,d)(A', d') are the morphisms f:A A' of K
such that the following diagram commutes.

dD )A

A'
Now the endofunctor F,:(D$N)-(D,I,K) can be obtained by putting F(A,d)=(FA, (Fd)or)

for objects and F,(/) =F(/) for morphisms. Then one can see that
an F,-algebra is a pair ((A, d), ) where A is an object of K, and d'D A and:FA A

and the following diagram commutes.

D , F(D). , F(A)

A homomorphism ': ((A, d), ) - ((A', d'), ') is a morphism ': A A' such that the

following two diagrams commute.

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 767

F(A) A D a A

F(A') A' A'
Let us assume, for simplicity, that K is an to-category and F is to-continuous.
Then (DSK) is also an to-category. Its initial object is (D, idD). For colimits supposeA=((An, d),f,)

is an t-chain in DSK. Then it is straightforward to check that
/z (A, f)- A is a (colimiting) cone in K if and only if/z:A (A,/xo do) is in (D K)(and they have the same mediating morphisms). This makes it easy to show that F

is to- continuous.Now,

applying the basic lemma to (D K) and F, we have to find a colimitingcone
Ix" (F (+/-), F (+/-F=(I)))-> (A, d). One sees, by induction on n, that F (+/-(DI)) is(F"(D),d,) where d =F-l(Tr) .o':DF(D) and that F(LF(+/-))=Fn('a').

So from the above remarks one can take to be a colimiting cone, /x:(F"(D),F" (zr)) A,

also defining A, and put d =/x0od0. Then, by the basic lemma, the initialF-algebra
is ((A, d), a) where a is the mediating morphism from F/x to/x- (which
can be taken in K). Thus we see that A =lim_. (F"(D), F"(r)), together with its

colimiting cone, determines the initial F-algebra. Thus we have characterized the
original inverse limit construction in universal terms.

3. O-categories. In most of the categories used for the denotational semanticsof
programming languages, the hom-sets have a natural partial order structure. When
solving recursive domain equations only the projections are considered, and they areeasily

defined in terms of the partial order. Wand [44] introduced O-categories to
study such categories at a suitably abstract level. We now present a view of his work

as providing theorems and definitions which facilitate the application of the basic
lemma, as outlined in the introduction.DEFINITION 5. A category, K,

is an O-category if and only if (i) every hom-set
is a partial order in which every ascending to-sequence has a 1.u.b. and (ii) composition
of morphisms is an to-continuous operation with respect to this partial order.Note

that if K is an O-category, so is K, and if L is another so is K L. Here
the orders are inherited, and in the case of Kp we have fop___ gop if and only if f g,
for any morphisms f and g of K (in general we will omit the superscript when writing

morphisms in opposite categories).As

it happens O-categories are a particular case of a general theory of V-categorieswhere V

is any closed category (MacLane [21]); here O is the category whose objects
are those partial orders with 1.u.b.s of all increasing to-sequences and whose morphisms
are the to-continuous functions between the partial orders. We will not use any ofthe general theory

but just take over the idea of endowing the morphism sets with
extra structuremin this case that of being an object in O.DEFINITION 6. Let K

be an O-category and let A rB gA be arrows such that
g of idA and fog ___idB. Then we say that (f, g) is a projection pair from A to B, that
g is a projection and that f is an embedding.LEMMA 3. Let (f, g) and (f', g') both be

profection pairs from A to B, in anO-category K. Then f _f' if and only if
g _ g'.Proof. If f_f' then g_gof'og'_gofog'=g'. Conversely,

if g_g' then f=fog'of'_fogof'_f'. V!

768 M. B. SMYTH AND G. D. PLOTKIN

So, in particular, it follows that one half of a projection pair determines the other;
if f is an embedding we write fR for the corresponding projection which we call the

right adfoint of ; if g is a projection we write gL for the corresponding embedding
which we call the left ad]oint of g. (Our use of the term "adjoint" is only a matter of

convenience; when the K-objects are posets and the morphisms are monotonic maps,
it agrees with a standard usage.)

Given any O-category K we can now form the subcategory, KE, of the embeddings.For

the identity morphism idA'A-->A is an embedding with ida=idA, and ifA fB-)f'c

are embeddings, so is (f' of) with (f'of)R "--fRf'R. Equally, we can
form KP, the subcategory of the projections. We do not try to take either of these as

O-categories under the induced ordering; indeed they are, in general, not O-categories.

3.1. Duality for O-categories. Our discussion of adjoints shows that we have theduality KE (KP)p (and

so too Kp (KE)P). There is another kind of duality arising
from the fact that an embedding in Kp is just a projection in K. Thus (KP)E KP(and

so (KO)P KZ). Thus an to-chain in (KP)z can be considered as an toP-chain inKP,
and a colimiting cone in (KP)E can be identified with a limiting cone in Ke. We
therefore have the following dualities (for an O-category K): embedding/projection,
to-chain in KZ/0oP-chain in KP, colimiting cone in KZ/limiting cone in KP. A furtherexample, O-colimit/O-limit,

is provided by Definition 7.
These observations will be used in the proof of Theorem 2.Our

first theorem is trivial but does illustrate the idea of transferring properties
from K to KE.THEOREM 1. Let K

be an O-category which has a terminal obfect, z, and in
which every hom (A, B) has a least element, +/-A,U. Suppose too that composition isleft-strict

in the sense that for any [:A- B we have +/-.cof +/-A.O Then +/- is theinitial object of K.

Proof. First, if f, f" +/- A are both embeddings, then they have a common rightadjoint, as

+/- is terminal in K, and so, by Lemma 3, they are equal. Second, -t-.+/-.A' +/- A

is an embedding with right adjoint +/-A.+/-. For .J_A,+/-_L+/-,A'_[_ "-)_L must be id+/- the
unique map from _1_ to +/- and +/-_.A +/-A.+/- [A,A (by left-strictness) _idA.To make the

connection with the basic lemma, we need to be able to relateO-notions (expressed

in terms of the ordering of hom-sets) to to-notions (expressed
in terms of toP-limits/to-colimits). This is the main purpose of Theorem 2. Anotherway

to view this result, exemplified further in the ensuing discussion, is that it is
concerned with the correspondence between local properties (that is, properties local
to particular hom-sets) and global properties of the category. Yet another way to
regard Theorem 2 is to note that it contains the most complete and general formulation
of the limit-colimit coincidence, remarked in Scott [33], that we have been able todevelop.

DEFINITION 7. Let K be an O-category and/x" A A a cone in K, where A is

Rthe to-chain (A,, f, ). Then is an O-colimit of A provided that (/x, o/x, ), is increasing

with respect to the ordering of hom (A, A) and I1,,/x, o/x, idA. Dually an O-limit

of an toP-chain F in K P is a cone u' B - F in K such that ou,), is increasing andII, u

u, idB. RObviously,/x

is an O-colimit of A if is an O-limit of AR, where we define AR R
to be (A,, f,n) and/x to be (tz,THEOREM

2. Let K be an O-category and A be an to-chain in K. Consider the
six properties

(a) A has a colimit in K,

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 769
(b) AR has a limit in K,
(c) A has an O-colimit,

(d) AR has an O-limit,
(e) A has a colimit in KE,

(f) AR has a limit in KP.
We have" properties (a)-(d) are equivalent (to each other); (a) implies (e); and (e) is
equivalent to (f). Indeed, a cone " A->A (a cone v'A --> AR) is colimiting (limiting) inK if and only if

I (v) is an O-colimit (O-limit); any colimiting (limiting) cone of A(AR)in K is also a colimiting (limiting) cone of A(AR) in Kz (KP); and A A is colimiting

R KP"in K if and only if is limiting in
Proof. We establish Propositions A-E which are jointly equivalent to the result.We always suppose that A has the form (A,, f,). Note that (', o,),R is increasing

Rfor any cones 'AA and "AA' in K, as we have' ,o,

PROPOSiTiON A. If " h A is an O-colimit, then is colimiting in both K andE.
Proof of Proposition (A). Choose a cone " h A in K, and suppose " A A'is a morphism from to ' (i.e., for all n, o, ')., Then is determined by:

R R R0 OoU p,.o. Lj (0 op,.)o,

'o/R since the aboveThis proves uniqueness; for existence we can define 0 as II/,remark shows that (' R
/, is increasing, and calculate:

So is colimiting in K. For KE it only remains to show that if ' is actually a
cone in K then 0 as defined above is an embedding. By the remark above, (/z, o/z '),,o
is increasing; to show that 0 is an embedding, we prove that it has the right adjoint

O R tRL_l l. lzOn

the one hand we have"

vR R vR R R(I I/.o. )o(I I/no/z. )=1 I/.o(/z. o/.t.)o/. =U/zno/z. =idA,

on the other hand we have"

R vR R vR vRU ]J, tn l )o([[ ia, .t )---[_] ]. .t in i ].I pl, idA'. I-!

Dually, we have Proposition B:PROPOSITION B. If v:A

-> AR is an O-limit, then v is limiting in both K and KP.

PROPOSITION C. If v" A-> AR is limiting in K, then each v, is a projection and v
is an O-limit of AR.Proof of

Proposition (C). For each A, we can define a cone v (') :Am --> AR in K by:.,)={f..

(m<-n),"
(A)' (m > n ).

(m) RTo see that v " is a cone, we first check that if r_->max (m, n) then v
(m)For if m <- n, then f.R f f.R (f f V ;if m > n then fnRr f

770 M.B. SMYTH AND G. D. PLOTKIN

(m)(fmrfnm)R fmr--fnRm ln Now we see that v (") is a cone, as follows:

Vn+l (f(n+l)rfmr) (by the above with r max (m, n + 1))

(f(n+X)rOfn)R fmr =fnRrfmr

(m)v. (by the above).

Now as v" A - AR is a limiting cone there is, for each m, a mediating morphism(m) (m)
O,. "A,. A from v to v. So we have for all rn and n" v. O.. v.. Putting n equal
to m we find that v. o0,. ida.., which is half the proof that v,. is a projection withL

Next we connect up the O,.'s by showing that O.. O,./of. which holds since0,.+1of,.

mediates between v ") and v as can be seen from:

(re+l) +1)v.o(O.,+lof.) v, of,., (Om+l mediates between v " and v)

(with r max (m + 1. n))
(m)fnRr fmr Vn

This, in turn, enables us to show that (O,.ov.,),,o is increasing: O.,ovm=O.,+lof.,ofov,.+l=_O+loV,.+l. Consequently, as K

is an O-category, we may
define 0" A A by" 0 =1 I.o, O,.ov. To finish the proof, we show that 0 ida (asL
then we also have 0,. v., _0 idA, completing the proof that v,. 0.,). This follows
from the fact that 0 mediates between v and itself as is shown by"

'rnn m_-->n mn
By duality"PROPOSITION D. If/:A--> A

is colimiting in K, then each I, is an embedding,and

Iz is an O-colimit.PROPOSITION E. A

--> A is colimiting in K if and only if i R :A - AR is limiting

in KP.Proof of

Proposition E. Obvious.
This completes the proof of Theorem 2.Our

first main use of Theorem 2 will be to establish the evident corollary that ifK
is an O-category which has all oP-limits, then K has all 0o-colimits. The second
main use concerns functors, but first a definition and another corollary prove convenient.DEFINITION

8. An O-category K is said to have locally determined to-colimits of
embeddings provided that, whenever A is an to-chain in K and/:A- A is a cone
in K,/x is colimiting in K if and only if/ is an O-colimit. (Note that, by Theorem2, only half

of the implication can ever be in doubt.)COROLLARY (to

Theorem 2). Suppose that the O-category K has all toP-limits(i.e.,
every toP-chain in K has a limit). Then K has locally determined o-colimits of
embeddings.Proof. Suppose that/" A A

is colimiting in K. Let v" A' AR be a limit with
respect to K for AR. By Theorem 2, v' is an O-limit for AR. Thus, v' is an O-colimit
for A, so that by Theorem 2, v ' is colimiting in K. Hence/z is isomorphic with v'

and must itself be an O-colimit (the property of being an O-colimit is trivially invariant
under isomorphism of cones).

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 771
By duality, the conclusion of the corollary also follows from the assumption thatK has

all t-colimits, but that is not so useful. At present we lack an example of anO-category

which does not have locally determined t-colimits of embeddings.As
mentioned in the Introduction, a major reason for introducing K is to enable
us to consider contravariant functors on K as covariant ones on K" the remainder
of this section develops the idea. We consider throughout (that is, to the end of thesection) three

O-categories K, L, M and a covariant functor T: KP L M. Purely
covariant functors are included by suppressing K (i.e., taking it to be the trivial
one-object category), contravariant ones by suppressing L, and mixed ones by takingK and L

to be product categories as required.DEFINITION

9. The functor T is locally monotonic if and only if it is monotonic
on the horn-sets; that is, for f,f"A -B in Kp, g, g"CD in L, if f_f' and g_g',

then T(f, g) _ T(f', g').LEMMA 4. If T

is locally monotonic, a covariant functor T K L - M can
be defined by putting, for objects A, B'TZ(A,B)=T(A,B) and for morphismsf,

g" TE (f, g)= T((fR)r', g).Proof. First if f:A - B in KE and

g" C - D in LE, then T(fR, g) is an embedding
with right adjoint T(f, gR) as" T(f, g)Ro T(fR, g)= T(fR of, gRog) T(iaA, iac)idT.c)

and also: T(fR, g)oT(f, gR)=T(fofR, gogR)_T(idmidD) (by localmonotonicity) idrCn.o).

Secondly, TE (idA, idc)= T(id, idc)= T(idA, idc)= idrg.c).Thirdly

if A -rA'-' A' in KE and B -gB' g'B" in LE then

TE(f', g') TE (f, g)= T(f', g')oT(fn, g)= T(fRof'R, g' og)

T((f'of)R, g' og)= T(f of, g'og).
Under some assumptions on K and L, we can transfer a local continuity propertyof T

to the to-continuity of TE.DEFINITION 10.

The functor T is locally continuous (equivalently, is an O-functor)
if and only if it is to-continuous on the hom-setsthat is, if f," A - B is an increasing

to- sequence in Kp and g" C - D is one in L, then T(, f,, II, g, II, ,o T(f,, g,).Note

that the constant and projection functors are locally continuous, and that
the locally continuous functors are closed under composition, tupling and taking

opposite functors.THEOREM 3. Suppose T

is locally continuous and both K and L have locally
determined to-colimits of embeddings. Then T is to-continuous.Proof. Let A ((A., B.), (f., g.))

be an to-chain in KE x LE and let/x" A - (A, B)
be colimiting, where tz (try, -.).. Then (r.)" (A., f.)- A is colimiting in K and(z.)" (B., g.)- B

is colimiting in Lz. It follows by the assumptions on K and L thatR R

with the right-hand sides increasing.idA II tr. oct, and id II -.We have
to show that TE (/z)" TE (A) TE (A, B) is a colimiting cone in ME, which
we do by showing that it is an O-limit (and then applying Theorem 2). First

(TE(la.,,)oTE(lx,,)R),,., (T(o-.R, -,,)o T(tr.R,

R(T(o'R, r,,) T(o',,, "r,, )),,

R R(T(cr. oct., r. o.r.

772 M.B. SMYTH AND G. D. PLOTKIN

RR and (z. oz. ).,o are and as T is locally monotonic.which is increasing as (r. or. )..,
Next,

R RTz(tz.)o Tz(l..)R II T(o'. oo.., "r. o7..

T O'nO'n, [[ Tn'l

(by the above)

(by local continuity)
T(idA, ida) (by the above)
idT(A,a). 1-1
4. Examples. In this section we present several useful O-categories where our
general theory can be applied. In general we only sketch proofs and even omit themWhen they are

either evident or not directly relevant to the main line of the argument(but
for Example 2, see [22]). The first example is elementary, being little more than
an illustration of the ideas. The second example is the category of cpos where all the
needed domains for denotational semantics can be constructed. This is an approach
where as few axioms as possible are imposed. That makes the axioms very easy tounderstand

but admits domains of little computational interest. The third example
illustrates various completeness conditions that are weaker than Scott's original
requirement of complete lattices, which rules out some natural and useful domains.

The fourth example considers axioms of algebraicity and continuity which attempt to
force the domains to be computationally realistic. One use of the completeness axioms(cf.

Example 3) is that when combined with algebraicity (or continuity), functionspaces

exist although they need not otherwise do so. Example 5 turns in a different
direction, suggesting a certain category of continuous algebras as an appropriate placefor the

semantics of programming languages with nondeterministic constructs.
Example 6 considers a category of relations over cpos where it is possible to construct

a wide variety of recursively specified relations; these are useful when relating different
semantics.Example 1. Partial functions. We

consider the category Pin of sets and the partial
functions between them. The partial order relation between partial functions is just
set inclusion and can also be defined for any f, g:A B by

f=_g---Va A.f(a), f(a)= g(a)
(where f(a)$ means that f(a) is defined). Clearly limits of increasing to-sequences(f,),

exist being just the set-union Uf, so that

(1 f)(a)= bundefined (:in f, (a b ),(qn. f (a) is undefined).
It is easy to see that f: A - B is an embedding if and only if it is total and one-to-one;
in that case fR =f-1. Thus to within isomorphism, embeddings are just inclusions.Note

that the totally undefined function :A B is the least element of hom (A, B)
and that composition is left strict in the sense of Theorem 1. The empty set is the
terminal object, the unique mapping being A and so the conditions of Theorem1

apply, and we see that is the initial object in Pfnz (and of course that is trivialanyway).

Turning to to-colimits in Pfn, it is obvious that they exist, as to-chains A (A., f.)are,
to within isomorphism, just increasing sequences Ao _ A _. , and so A t_JA.

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 773
is the colimiting object with the colimiting cone of inclusions/z,, "A, G A. This also
follows from Theorem 2, since Pfn has toP-limits. These are constructed as in Set:

let A (A,, fn) be an toP-chain; putA {a 1-IA, ltn.a,, =/n (a,+l)} and define v, :AA,

to be the "nth projection" a an. Then A is the limit of A and v is the colimiting
cone.

Turning to functors, we define the Cartesian product on morphisms f:A A' and
g: B B' by:

(f x g)(a, b)= (fa, gb (if f(a) and g(b),),undefined (otherwise).
This makes the Cartesian product locally continuous and so, by Theorem 3, tocontinuous. Amusingly, the categorical product exists but is different from Cartesianproduct

and is not even locally monotonic. On the other hand, the categorical sum
exists and is locally continuous. On objects it is disjoint union"

A + B ({0} x A) CI ({ 1} x B)
and for morphisms f:A -A' and g:B B',

(O, f(a))
(f + g)(c (1, g (b))

undefined

(]a A.c (0, a) and f(a)),

(]b B.c =(1, b) and g(b)+),

(otherwise).

Finally, there is a natural function-space construction defined by

A B =hom (A, B),
and for f: A' A and g: B B'

(f --> g)(h go.h of.
This is not even locally monotonic, and so Theorem 3 does not apply. This is as

expected, as the recursive domain equation (1) cannot have solutions in Pin (for

nontrivial At) by evident cardinality considerations. For another example of an
elementary O-category, the reader can consider the category Rei of binary relations
between sets, with the subset ordering on relations.Example 2. Complete partial orders. We

consider the category CPO (essentially
introduced in 2) of complete partial orders and to-continuous functions. It is anO-category

when we define the order between morphisms f, g:A B in the natural
pointwise fashion

fg ----ta A.f(a)_g(a).
Limits of increasing to-sequences of morphisms are defined pointwise. The conditions
of Theorem 1 are satisfied, as the trivial one-point partial order is the terminal object

and any given hom (A, B) has least element a - +/-B and composition is left-strict.

Turning to to-limits (to apply Theorem 3), let A =(A, f,) be an to-chain and
construct u" A A as in the case of Pin taking the partial order on A componentwise
so that for any a, a' in A.

a=_a'=- tn a, =_a 'n.

This makes A a cpo with least upper bounds of increasing to-sequences,

taken componentwise la(n=(a. )

774 M.B. SMYTH AND G. D. PLOTKIN

and with least element (I I, =>,, fn,, (_t_a. )). Further v is a cone of continuous functionsand

it is limiting, as if v" A'-> A is any other, then if 0 is a mediating morphism wehave,

for all n, that O(a'),, v',, (a'), determining 0 as a continuous function. Thus we
have sketched the proof that CPO has all oP-limits.

Turning to functors, we have categorical product and function space functors.
The product of two cpos A and B is their Cartesian product with the componentwise

ordering; it is easily verified to be the categorical product. Its action on morphismsf: A

--> A' and g: B --> B' is also defined as usual:

(f x g)(a, b (fa, gb ).
Clearly, product is locally continuous. The function-space functor has the same (formal)
definition as in Pfn; however, this time it is easily seen to be locally monotonic and,

indeed, continuous. The function-space functor is the categorical one and CPO is
Cartesian closed.Unfortunately, CPO

does not have categorical sums. It is therefore better to
consider the category CPO_ of cpos and strict continuous functions (where for any

cpos A and B a function f:A B is strict if f(+/-A)= +/-B). This has a categorical sum
which is defined on cpos A and B by putting

A +B [{0} x (A\{_I_})] U [{1} x (B\{+/-})] LI {+/-},
with the partial order defined by

c=_c' =-[a, a' ea.a=_a' ^ c (0, a) ^ c'= (0, a')]

v[=lb, b'B.bGb'^c =(1, b) ^c'=(1, b')]
VC=/
In other words, A + B is the coalesced sum, that is, it is the disjoint union of A andB,

but with least elements identified. The action of sum on morphisms turns out to
be given by putting for f:A A' and g:B B'

/ (0, f(a)) (:ia A .f(a) # _1_ ^ c (0, a )),(f +g)(c)=i(l' (otherwise),(ZlbB'g(b)+/-^c=(l'b))'

and this shows that the sum is a locally continuous functor. Now we know that +and,

for example E are covariant t-continuous bifunctors on CPO and CPOE
respectively. Luckily however these latter categories are the same, as both embeddingsand projections

in CPO are strict. (To see this let f:A B be an embedding in CPO.Then f(L)Gf(fR(L))G+/- and

so f(+/-)= 2; also fR(+/-)=fn(f(+/-))= _k.).In
the same vein we can consider the smash product A (R)B in CPO+/- defined as{(a, b) A x B [a

# +/- =- b # +/-} with the componentwise ordering inherited from the
product A xB (which happens also to be the categorical product in CPO+/-). Onmorphisms f:A - A' and f:B - B' the functor

acts as follows:

(f(a), g(b))(f(R)g)(a, b)=

(_t_, _t_)

(if f(a) +/- and g(b) +/-),
(otherwise).

This definition shows that the smash product is locally continuous. It can be characterized categorically. Say that a function f" A x B C of cpos is bistrict if and only if forany

b in B, we have f(+/-, b)= +/- (left-strictness) and also for any a in A we havef(a, +/-)

+/- (right-strictness). Then the evident bistrict function (R): A B A(R)B is the

universal bistrict continuous function from A B in CPO_.

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 775
The strict function-space functor is defined as before (formally) but this time inCPO+/-

and we denote it by-.. It also is easily seen to be locally continuous. From
a categorical point of view (see [21]), smash product makes CPO+/- a symmetric
monoidal category. Further, as we have a natural bijection

hom (A(R)B, C) horn (A, B -. C),
CPO. is even a closed category. This to some extent repairs the fact that it is not
Cartesian closed and explains the appearance of the smash product.

Finally we note a useful functor (.).: CPO CPO. called lifting. For any cpo D,

(D)_ ({0} D) 13 _t_,
with the partial order defined for any d, d' in (D) by:

dd'=(::lc, c' D.cTc' ^d=(O,c) ^d'=(O,c'))vd=_l_.
On morphisms f:D - E we have for any d in (D).

J (0, f(c)) (if d (0, c)),(f)_(d)

_1_ (if d= _1_).

From a categorical point of view, lifting is the left adjoint to the forgetful functor
from CPO+/- to CPO. We now have a wide variety of covariant continuous functors

over CPOz= CPO; Lehmann and Smyth discuss many of their uses in [20]. What
is more, all of them arise naturally from a categorical point of view.It does

not appear to be useful to use O itself (a variant of Reynolds' predomains[32])
as Oz has no initial object. (To see this, suppose to the contrary that D is initial.
Then there is an embedding f: D - , and we must therefore have D ; but clearly

is not initial, as there is no embedding g: .- X for any nonempty X.) On the
other hand, one often sees an alternative definition of cpo where it is assumed that

all directed sets have 1.u.b.s rather than just increasing to-sequences. (A subset X of

a partial order P is directed if it is nonempty and any two elements of X have an
upper bound in X.) Let us call these partial orders dcpos (directed complete partialorders). One

easily adapts the above discussion to this case. Which definition to take
is not a choice of great significance. On the one hand, the restriction to to-sequences
gives a larger category and is also computationally natural, as they arise when taking
least fixed points; on the other hand the directed sets are natural mathematically. The
following fact shows the difference is essentially one of cardinality.FACT 1.a. A partial order with

a least element is a cpo if and only if it has alll.u.b.s of countable
directed sets.
b. A function f: A B between cpos is to-continuous if and only if it preservesall l.u.b.s of countable

directed sets.Proof.
First note that for any countable directed set X there is an increasing
sequence (x,),,o of elements of X such that any element of X is less than some x,.Then

we have IIX IIx,, and part a easily follows. For part b, suppose f:A-B is
to-continuous and let X _ A be directed. With (x,),,, as above, we calculate

xX
and this finishes the proof, as the other direction is immediate. [3Another way

to look at these matters was discussed by Markowsky [22], whonoted
that a partial order is a dcpo if and only if it has 1.u.b.s of all (well-ordered)

776 M.B. SMYTH AND G. D. PLOTKIN
chains, and a function between dcpos preserves all 1.u.b.s of directed sets if and only
if it preserves all 1.u.b.s of (well-ordered) chains.Example 3. Completeness. We

consider some full subcategories of CPO defined
by imposing various completeness conditions.DEFINITION 11. Let D be

a partial order. A subset, X, of D is K-consistent if
and only if whenever Y _ X and Y[I < , Y has an upper bound in D.Any

subset, X, of a nonempty partial order is 0-, 1- and 2-consistent; it is
3-consistent if and only if it is pairwise consistent in the sense that any pair of its
elements has an upper bound in D; it is to-consistent if and only if any finite subset
of its elements has an upper bound in D. Clearly if <_-' then every '- consistent
subset is also to-consistent; clearly too, any directed subset is to-consistent.DEFINITION 12. A

partial order, D, is -complete if and only if it is nonemptyand
every -consistent subset has a least upper bound.It follows from the above remarks that

if <-_ ', then every -complete partial
order is '-complete; also every to-complete partial order is a cpo (and even a dcpo).Clearly

for 0_-< n < 3 the n-complete partial orders are the complete lattices and the
3-complete partial orders are the coherent cpos, in the sense of [24], [29] and,
essentially, [11]. We now see that a partial order is to-complete if and only if it is

consistently complete in the sense of [29], [36] and, essentially, [11], [24].FACT 2. Let D be

a partial order. It is to-complete if and only if it is a dcpo withl.u.b.s of all
subsets with upper bounds in D.Proof. Let D

be to-complete. We have already noted that it js a dcpo. Also any
subset with an upper bound in D is to-consistent and so has a least upper bound.

With the converse hypotheses, let X be an to-consistent subset. Then every finite
subset has an upper bound in X and so has a least upper bound. The set of such
1.u.b.s is then directed and so must itself have a 1.u.b. which is also the 1.u.b. of X.

Turning to the properties of the full subcategory of -complete partial orders,
we see that Theorem 1 may be applied, as the one-point cpo is a complete lattice.To

see that toP-limits exist, let A (A,, f,) be an to-chain and define v:A-. A asbefore. As

this defines a limiting cone in CPO, it only remains to show that A is
-complete. The proof employs an idea of Scott, for the case of complete lattices (wehave already employed

it to show that A has a least element).FACT
3. A is K-complete.Proof. Suppose X A

is K-consistent. Then for every m, so is {x,lx X}, and
then the least upper bound of X is (I l,, __> f,n (I {X,,IX X}))n,o.So

the category of embeddings is a full subcategory of CPOE with the same
colimiting cones of o-chains. It follows that any to-continuous functors over CPOE
which preserve to-completeness cut down to to-continuous functors on the subcategory.

This remark applies to all the functors discussed in Example 2 except the sum functor,

which only preserves K-completeness for K => 3. Sums of lattices can be defined by
adding a new top element or by equating top elements as in [34], [30], and can bedealt

with by local continuity. General completeness concepts have been considered
in [3]; it would be interesting to see how they fit into the present considerations. Oneapproach

to handling nondeterminism and concurrency is to use one of several
available powerdomain functors. These are available over CPO (see [15]), and theSmyth powerdomain [37]

is available over the to-complete cpos. However, the Plotkin
powerdomain [27] does not preserve to-completeness; a very weak notion of completeness was needed, leading to the so-called SFP objects (briefly considered in 5).Example 4.

Continuity and algebraicity. Now we consider the to-continuous andthe to-algebraic cpos. Our

main definitions (13 and 15) are formulated entirely in

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 777
"countable" terms, but we pause to show that one could just as well start from
definitions (14 and 16) formulated without any countability restrictions.DEFINITION 13. Let D

be a cpo. The countable way-below (=relative compact-ness)
relation is defined by: x <<y if and only if for every countable directed subsetZofD, ifym_llZthenxm_zforsomezinZ.

A countable subset, B, of D is an to-basis of D if and only if for every element
x of D the set Bo,(x)=aCf{b Blb<<,ox} is directed with 1.u.b.x.

The cpo D is to-continuous if and only if it has an to-basis.
This definition is not quite the very similar one considered in the case of complete
lattices by Scott in [33] and more generally for dcpos in [36], [23] and several papers

in [7].DEFINITION 14. Let D be

a dcpo. The way-below (= relative compactness) relation
is defined by: x << y if and only if for every directed subset Z of D, if y_llZ theny_

z for some z in Z.A subset B of D

is a basis of D if and only if for every element x of D the setB(x) =aef{b Blb
<< x} is directed with 1.u.b.x.
The dcpo D is continuous if and only if it has a basis.To

relate these two notions, we first note a few useful and easily proved facts.In
a cpo we have that x <<,oy implies x_y and x <<,oy---z implies x <<,oz; analogous
facts with << replacing <<o hold in a dcpo; for any elements x, y of a dcpo, if x << y

then x << o,y.FACT. 4. A partial order is an w-continuous cpo if and only if it is a continuous

dcpo with a countable basis.Proof. Let D be

an w-continuous cpo with o-basis B. First, we see it is a dcpo.For
if X is any directed set then A xxB(x) is countable and directed (by theabove facts), and

so its 1.u.b. exists and is the 1.u.b. of X. Next we show for any
elements x and y of D that x << y if and on13 if x <<,oy. Suppose x <<,oy and y_lIZ
where Z is directed. Then y =_llA as before, and so for some z in Z and a in B,o(z)

we have x =_a <<z, and so x=_z. This establishes x << y. We have already noted theconverse,

that x << y implies x << y. Therefore B (x)= B (x) for any x, and so B is a
countable basis. The converse assertionthat any continuous dcpo with a countable
basis is o-continuousis proved along the same lines. !-1

The w-algebraic cpos are a subclass of the w-continuous ones and can also bepresented

in two ways.DEFINITION 15. Let D

be a cpo. An element x is o-finite (=w-compact) if and
only if x <<,ox. The cpo is w- algebraic if and only if there is an w- basis of finite elements.DEFINITION 16. Let D

be a dcpo. An element x is finite (=compact) if and only
if x << x. The cpo is algebraic if and only if there is a basis of finite elements.One

then sees that D is an o-algebraic cpo if and only if it is an algebraic dcpo
with a countable basis of finite elements. Also in any (w-) algebraic dcpo (cpo), there

is only one (w-) basis, namely the set of all (o-) finite elements.

Turning to the full subcategory of the w-continuous cpos, we note that it containsthe
one-point cpo, so Theorem 1 applies; however, it does not have all to-limits,and

we conjecture it does not have to-colimits. The same remarks apply to the
o-algebraic cpos. Fortunately, however, the embedding subcategories inherit

colimits from CPO+/-. We need a preliminary lemma.LEMMA 5a.

Embeddings (in CPO) preserve the countable relative compactnessrelation.

b. Let E be a cpo and B be a countable subset of E. If x is an element of E and
there is a directed subset C of Bo,(x) with l.u.b, x, then B,,(x) is directed, with l.u.b, x.

778 M.B. SMYTH AND G. D. PLOTKIN

c. Let E be a cpo and B and C be subsets of E, with B countable. Suppose thatfor
every element y of C, B,o (y) is directed with l.u.b, y and suppose too that for everyelement

x of E there is a countable directed subset, Cx, of C such that x II Cx. ThenB
is a basis for E.Proof.

a. Let f:D E be an embedding in CPO and let x, y be elements of D
where x<<o,y. If f(y)_l IZ where Z is a countable directed subset of E, then yfL(f(y))_l fL(Z). So

for some z in Z we have x=_f(z), and so f(x)m__f(f(z))Ez,
showing that f(x) <<,of(y).b. If

u <<,ox and v<<x, then there are u' v in C such that u_u', vv'. But asC
is directed, this shows that Bo, (x) is directed too.

c. Take x in E and consider {Bo, (y)[ Cx}. This is a directed set, with respect to_,
of directed sets as C is directed; its union is therefore directed and is clearly a
subset of B,o (x) with 1.u.b.x. So by part b, B,o (x) is directed with 1.u.b.x. VIFAC 5. Let A (D, f)

be an to-chain in CPO of to-continuous (w-algebraic)cpos. Suppose
tz" A--> D is colimiting. Then D is w-continuous (w-algebraic).Proof. We use Lemma 5c to show that D is w-continuous when the D, are. Let

def (n))B (") be an to-basis for D, (n s w); we claim B

,/z, (B is an w-basis for D. LetC be ,/,(D,). By Theorem 2 applied to CPO, we can take C ={l,(tzn(x))]n, Sto}.

Now (Lemma 5a) for each y in D,, ,(B( (y)) is a directed subset of B,o(,(y)) with
1.u.b.y. So by Lemma 5b B,o(/,(y)) is directed with 1.u.b. /,(y). Thus Lemma 5capplies. In the case where the D, are all

to-algebraic, we take B (" to be the w-finiteelements of D, and
find a basis of to-finite elements of D. [3So the full subcategory

of CPO of the to-continuous (to-algebraic) cpos is anto-category
that inherits to-colimits, from CPO. It follows that any w-continuous
functor over CPO that preserves to-continuity (w-algebraicity) cuts down to an

to-continuous functor over the subcatego.ry. This enables all the functors discussed
above for CPO to be handled except the function space functors which preserve

neither to-continuity nor to-algebraicity (see [24], [23] for a counterexample). Herecompleteness

considerations help. The full subcategory of CPO of the u-complete
and w-continuous (to-algebraic) cpos is clearly an to-category that inherits to-colimits
from CPOz (for K -<_ w).Now

all the functors discussed above preserve the property of being both Kcomplete and o-continuous (o-algebraic). We have already noted this for all exceptthe

function-space functors. For these, one notes that the proofs in [24], [23] foro-complete and

continuous (algebraic) dcpos adapt easily to o-complete and ocontinuous (algebraic) cpos whether we consider all continuous functions or only the
strict ones. The general case then follows from the facts that K-complete implies
o-complete for K --<_w and that K-completeness is preserved.Example 5.

Nondeterministic domains. The category NDO was found useful for
the semantics of nondeterministic and parallel programs in [15]. Its objects are the

nondeterministic cpos (D, _, LI) where (D, ) is a cpo and " DZ D is an associative,
commutative absorptive w-continuous binary function (called union); the morphismsf: D E

are those w-continuous functions which preserve union.
The trivial one-point object is terminal in NDO+/- and the conditions of Theorem1
are satisfied. Further, NDO has oP-limits. Indeed, the forgetful functor U:NDOCPO

creates them. Let A (D,f) be an co-chain in NDO and suppose u'E UA
is universal in CPO, being constructed as shown above. Then if we want a union onE

so that the u, are NDO morphisms, we have for elements x, y, of E"

(X I,.J y)n Un(X [,.J y) Un(X) [,.J un(y) xn [,-J Yn.

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 779
So this determines union, and it is easily seen that with this definition we obtain a
universal cone in NDO. One interesting locally continuous function is ___, where on

objects D, E"

D E {f:D - Elf is to-continuous and preserves _},
(where x __ y defX J y y), with the pointwise order and union, and defined as usual
on morphisms. Other examples can be found in [15].

Of course, there are many interesting varieties (or pseudovarieties of one kind
or another) subject to similar considerations [9], [25]. However, we have no clear
idea of the possible applications.Example 6. to-complete

relations. This category (or rather a slight variation of it)
has been found to be useful for relating different semantics by Reynolds [31] (see

also [12], [26]). It has as objects structures (D,E,R) where D and E are cpos andR _D x E

is a binary relation which is to-complete in the sense that if (dn), (en) are
increasing sequences in D and E, respectively, such that R (dn, en) holds for all integers

n, then R (I Idn, lie,) holds too; the morphisms are pairs (f, g): (D, E, R) (D', E', R')where f:D D', g:E E'

are morphisms in CPO, and for all x in D and y in E ifR (x, y)
holds then so does R'(fx, gy).
The terminal object is (+/-, 2, R+/-) where +/- is the one-point cpo and R+/- is thecomplete

binary relation over +/-; clearly, too, all the other conditions of Theorem 1apply. Next

to-limits exist. To see this, let A ((D,, E,, R,), (f,, g,)) be an to-chain.Let u' :D (D,, f,)

and u":E(E,,g,) be limiting cones in CPO, constructed as
above. Then u" (D, E, R) A is limiting where u, (u', U'n') and R (d, e) holds if andonly

if for all n the relation R, (d,, e,) holds.A

useful function space functor is given on objects by putting (D,E,(D', E', R') __def (D - D', E E', R R') wher.e D D'

and E E' are the cpos of
all to-continuous functions, and where

(R R')(f, g)=-Vx D, y,E.R(x, y)=R'(f(x), g(y))
The action of the functor on morphisms is defined analogously to the case ofCPO.

Other examples can be found in [31]. This idea can be extended to several
relations and to relations of any denumerable degree. It can also be combined with
the ideas of Example 4 to consider continuous structures of various kinds. However,
we must point out that the scope and usefulness of these mathematical possibilities

is not known. We do not have a nice language for functors which permits a uniform
treatment of the examples in [31], [12], [26]; we do not know why these relations
seem to be needed only when function-spaces arise, for in other cases structural

induction [20] seems to be sufficient; we wonder if the continuous structures should
be accompanied by suitable logics along the lines of LCF 14] but possibly intuitionistic[35].

5. Computability. The approach to domain equation theory presented above
may be seen as an abstraction from Scott's "D" method [33]. As we have said, the

"universal domain" method (Scott [34]), and its relation to the above theory, are to
be treated in a separate paper. However, there is an aspect of universal domain theory,
stressed by Scott, which must be mentioned here" computability. Starting from a

suitable universal domain, it is possible to provide a smooth treatment of effective
computability for all the constructs of interest, generalizing the relevant parts of

classical recursion theory (Scott [34]). Lacking anything like this, the theory presented

above has to be considered as seriously defective.

780 M. B. SMYTH AND G. D. PLOTKIN

Fortunately, however, the deficiency can be remedied. Effectiveness can be built
into O-categories in a satisfactory way. Here we will simply indicate some of the main

points; for a fuller and more accurate treatment, see Smyth [38]. We again work bylifting

suitable properties from domains to categories. Algebroidal categories are
introduced as a generalization of algebraic cpos; they are categories with a (countable)

"basis of finite objects". Then we get a handle on computability by requiring that
bases be effectively presented.Approach A. Algebroidal

categories. These are the same as what Smyth previouslycalled
"algebraic categories" [37]. It has been brought to our attention that closelyrelated

notions have been discussed quite extensively in the literature of categorytheory,
and this is what has prompted the change in nomenclature. Our algebroidal
categories are essentially the "strongly to-algebroidal categories" in (a Slight extensionof) the terminology of Banaschewski and

Herrlich [6].DEFINITION 17. An object A of
a category K is finite in K provided that, for
any -chain A (V, f,),o in K with .colimit/z:A- V, the following holds: for any
morphism v:A- V, and for any sufficiently large n, there is a unique morphism

u :A V, such that v ix, u. We say that K is algebroidal provided (i) K has an
initial object and at most countably many finite objects, (ii) every object of K is a
colimit of an o-chain of finite objects, and (iii) every to-chain of finite objects has a

colimit in K.

Notation. If K is algebroidal, we denote by Ko the full subcategory of K with
objects the finite objects of K.The principal examples of interest

to us are SFPz (the category of SFP objects
and embeddings [27]) and various of its subcategories, for example the category of
bounded complete to-algebraic to-cpos and embeddings. The finite objects are in each

case the finite domains.THEOREM

4. Every algebroidal category has all to-colimits.Proof. See Smyth [37].

THEOREM 5. Let K be an algebroidal category, and let L be an to-category. Anyfunctor Fo from K0

into L extends uniquely (up to natural isomorphism of functors) to
an to-functor from K into L.

Outline of proof. For each nonfinite object D of K, choose a particular colimiting
cone D" Ao D, with Ao an to-chain in Ko; and for each -chain A in L choose a
particular colimiting cone/x a" A Da in L. The extension of F0 to all objects of K is

immediate (via the chosen colimiting cones in K, L). To define the extension F of Fo
to morphisms, consider first morphisms v" A V where A is finite and V nonfinite.
Since A is finite, v factorizes as v (lv)nou. Then we put Fv (iXloa,)noFou. Next,
for morphisms h: V- W, where V is nonfinite, define Fh as the mediating morphism

from the colimiting cone F(/xv)(=/ZFoav)) to F(holv). Of course, it has to be checked

that F so defined preserves composition of morphisms, and so is a functor (this isnontrivial).

Now suppose that F, F':K L are two to-continuous functors which extend Fo.For
each object V of K we have a canonical isomorphism 'v" FV-, F'V, namely the
mediating morphism from F(/x v) to F'(/x v). Naturality of - means that for h: V - W,F'ho'v

'w Fh; this is established by showing that 'w Fh mediates between thecolimiting cone F(/z v) and F'h rv oF (Ix v). [-1

Theorem 4 yields at once that SFPz (for example) is an to-category. Theorem 5
can be useful, at least heuristically, in setting up the definitions of appropriate
to-functors. Under these circumstances, the solution of typical domain equations, viathe basic lemma,

is unproblematic. More interesting is the question of effectiveness.
The following definition seems natural"

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 781
DEFINITION 18. Let (A,),o,, (fn),o, be enumerations of the objects and morphisms, respectively, of K0, where K is an algebroidal category. We say that K is effectively

given, relative to these enumerations, provided that the following predicates arerecursive

in the indices"i) Ai =Aj; fi =f"

ii) dom (]'k) Ai cod (]'k) Aiiii) /k

is an identityiv) ]i o. =/.

This enables us to define an effectively given obfect (of K) as an object that is
given as the colimit of an effective to-chain of finite objects, that is, as the colimit of
a chain of the form

fs(o) fs(1)A(o) A()

(r, s recursive). One will naturally try to define a computable morphism, similarly, asthe colimit of an effective to-chain of finite morphisms (that is, morphisms of Ko).
Actually, such a characterization would be inadequate. The definitions given so farare,

strictly speaking, appropriate only for categories of the form KE, whereas we arecertainly

interested in computability of morphisms other than embeddings. For anadequate treatment,

we have to reformulate the definitions so as to apply to Ocategories; this is done in Smyth [38] where, for example, we find that an "admissible"O-category K is, roughly speaking,

one for which KE is algebroidal. We can then
define a computable functor, roughly, as a continuous functor F for which we can
effectively assign to each finite object (morphism) A(f) an effective to-chain havingF(A) (F(f)) as colimit. A

basic result, in terms of these definitions, will be that the
initial fixpoint of a computable functor is computable.Approach B. Effective domains Kanda [17] proposes that only

computable items should be admitted to the domains and categories which we study--in

contrast to the usual practice of first building all the continuous/countably-based items
and then picking out the computable items from among these. This entails a

modification of the closure properties required of the domains and categories: we
now demand closure of domains with respect to sups only of effective to-chains, and

of categories with respect to effective colimits of effective to-cochains. This approach
works quite smoothly, and indeed yields a theory which is formally very close toSmyth [36]

as far as concerns effective domains. In regard to the theory of effective
categories (as developed by Kanda), perhaps the most striking feature of this theoryis the very simple

definition of computable functor (Kanda has "effective functor") in
terms of indexings of hom-sets, which it permits.

Unlike Approach A, however, Kanda's theory does not pretend to give a general
account of effectiveness in domains. In his theory, the definitions of an effective domain
and of an effective category are quite independent. In order to apply the theory, we
first define a particular category of "effective domains", and then show that this
category satisfies the axioms for an "effective category". The definition is ad hoc, inthe

sense that no general or uniform notion of effective domains is proposed" we
cannot, for example, define an effective dcmain to be an object of an "effectivecategory of domains" (in

contrast with our Approach A).We
incline to the view that these problems can best be attacked by means of the
ideas mentioned in Approach A (finite objects in categories, etc.); but that it may be
worthwhile to develop the argument in accordance also with the main ideas ofApproach B, namely, that only computable

items should be admitted to the field of
discourse.

782 M.B. SMYTH AND G. D. PLOTKIN

REFERENCES
[1] J. ADEMEK, Free algebras and automata realizations in the language of categories, Comment. Math.

Univ. Carolina., 15 (1974), pp. 589-602.[2] J. ADEMEK

AND V. KOUBEK, Least fixed point of a functor, J. Comput. System Sci., 19 (1979),
pp. 163-178.[3] ADJ (J. A. GOGUEN, J. W. THATCHER, E. G. WAGNER

AND J. B. WRIGHT) A uniform approach
to inductive p.o. sets and inductive closure, Theoret. Comput. Sci., 7 (1978), pp. 57-77.[4] M. ARBIB

AND E. MANES, Structures and Functors" The Categorical Imperative, Academic Press,New
York, 1975.[5] M. ARBm, Free

dynamics and algebraic semantics, in FCT Proceedings, M. Karpinski, ed., LectureNotes
in Computer Science, 56 (1977), Springer-Verlag, Berlin, pp. 212-227.[6] B.
BANASCHEWSKI AND H. HERRLICH, Subcategories defined by implications, Houston J. Math.,

2 (1976), pp. 149-171.[7] B.
BANASCHEWSKI AND R.-E. HOFFMAN, Continuous lattices in Proceedings, Bremen 1979. LectureNotes

in Mathematics 871, Springer-Verlag, New York, 1981.[8] M. BARR

Coequalisers and free triples, Math. Z. 116 (1970), pp. 307-322.[9] S. L. BLOOM,

Varieties of ordered algebras, J. Comput. System Sci. 13 (1976), pp. 200-212.[10] W. H.
BURGE, Reccursive Programming Techniques, Addison-Wesley, Reading, MA., 1975.[11] H. EGLI

AND R. CONSTABLE, Computability concepts for programming language semantics, Theoret.Comput.

Sci., 2 (1976), pp. 143-145.[12] M. GORDON, Towards

a semantic theory of dynamic binding, Memo AIM-265, Computer ScienceDepartment,
Stanford Univ. Stanford, CA, 1975.[13] .,
The Denotational Description of Programming Languages, Springer-Verlag, New York, 1979.[14] M. GORDON, R. MILNER

AND C. WADSWORTH, Edinburgh LCF, Lecture notes in Computer
Science 78, Springer-Verlag, Berlin, 1979.15] M. C. B.

HENNESSY AND G. D. PLOTKIN, Full abstraction for a simple parallel programming language,
in MFCS Proceedings, J. Beaver, ed., Lecture Notes in Computer Science 74, Springer-Verlag,
Berlin, pp. 108-120.[16] H. HERRLICH

AND G. STRECKER, Category Theory, Allyn and Bacon, Boston, 1974.[17] A. KANDA,
Fully effective solutions of recursive domain equations, in MFCS 1979, J. Beaver, ed.,Lecture Notes

in Computer Science, 74, Springer-Verlag, Berlin, 1979.[18] D. LEHMANN,
Categories ]'or mathematical semantics, in Proc. 17th IEEE Symposium on Foundations
of Computer Science, 1976.19] D. LEHMANN

AND M. B. SMYTH, Data types, in Proc. 18th Annual IEEE Symposium on Foundations
of Computer Science, 1977.[20] ,

Algebraic specification of data types: A synthetic approach, Math. Systems Theory, 14 (1981),
pp. 97-139.[21] S. MACLANE,

Categories for the Working Mathematician, Springer-Verlag, Berlin, 1971.[22] G. MARKOWSKY,

Chain-complete posets and directed sets with applications, Algebra Universalis, 6(1976),
pp. 53-68.[23] , A
motivation and generalisation of Scott's notion of a continuous lattice, in Continuous Lattices,B.
Banaschewski and R.-E. Hoffman, eds., Lecture Notes in Mathematics, 871, Springer-Verlag,
Berlin, 1981, pp. 298-307.[24] G. MARKOWSKY

AND B. ROSEN, Bases for chain-complete posets, IBM J. Res. Develop., 20 (1976),
pp. 138-147.[25] J. MESEGUER,

Varieties of chain-complete algebras, J. Pure Appl. Algebra, 19 (1980), pp. 347-383.[26] R. MILNE
AND C. STRACHEY, A Theory of Programming Language Semantics Chapman and Hall,
London 1976.[27] G. D. PLOTKIN, A

powerdomain construction, this Journal, 5 (1976), pp. 452-487.[28] G. D. PLOTKIN
AND M. B. SMYTH, Category-theoretic solution ofrecursive domain equations (extendedabstract),
in Proc. of 18th IEEE Symposium on Foundations of Computer Science, (1977), pp.
13-17.[29] G. D. PLOTKIN, "[]'

as a universal domain, J. Comput. System. Sci., 16, (1978), pp. 207-236.[30] J. C. REYNOLDS, Notes

on a lattice-theoretic approach to the theory of computation, Systems and
Information Science Dept., Syracuse Univ., Syracuse, NY, 1972.[31] ., On

the relation between direct and continuation semantics, in Proc. 2nd Colloq. on Automata,Languages

and Programming, Saarbrucken, J. Loeckx, ed., Lecture Notes in Computer Science14,
Springer-Verlag, Berlin, 1974, pp. 141-156.[32] .,

Semantics of the domain offlow diagrams, 24 (1977), pp. 484-503.

CATEGORY-THEORETIC SOLUTION, RECURSIVE DOMAIN EQUATIONS 783
[33] D. S. SCOTT, Continuous lattices, toposes, algebraic geometry and logic, in Proc. 1971 DalhousieConference, F. W. Lawvere, ed., Lecture Notes

in Mathematics, 274, Springer-Verlag, Berlin,
1972, pp. 97-136.[34] ., Data

types as lattices, this Journal, 5 (1976), pp. 522-587.[35] ,
Relating theories of the h-calculus, in To H. B. Curry: Essays on Combinatory Logic, Lambda
Calculus and Formalism, J. P. Seldin and J. R. Hindley, eds., Academic Press, New York, 1980.[36] M. B. SMYTH,

Effectively given domains, Theoret. Comput. Sci., 5 (1978), pp. 257-274.[37] .,
Powerdomains, J. Comput. System Sci. 16 (1978), pp. 23-26.[38] ,

Computability in categories, in Proc. 7th ICALP, J. De Bakker and J. van Leeuwen, eds.,Lecture Notes

in Computer Science, 85, Springer-Verlag, Berlin, 1980, pp. 609-620.[39] J. E. STOY,
Denotational Semantics: The Scott-Strachey Approach to Programming Language Theory,MIT Press,

Cambridge, MA, 1978.[40] R. D. TENNENT,

The denotational semantics of programming languages, Comm. ACM, 19 (1976),
pp. 437-453.[41] , Principles of

Programming Languages, Prentice-Hall, Englewood Cliffs, NJ, 1981.[42] C. P. WADSWORTH,

The relation between computational and denotational properties for Scott'smodels of the lambda-calculus,

this Journal, 5 (1976), pp. 488-521.[43] M. WAND, On
the recursive specification of data types, in Category Theory Applied to Computation
and Control, E. G. Manes, ed., Lecture Notes in Computer Science 25, Springer-Verlag, Berlin,

1974.[44] ,

Fixed-point constructions in order-enriched categories, Tech. Report 23, Computer ScienceDepartment,

Indiana University, Bloomington, Indiana, 1977.[45] ,
fixed-point constructions in order-enriched categories, Theoret. Comput. Sci. 8 (1979),
pp. 13-30.